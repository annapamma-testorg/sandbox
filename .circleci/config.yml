version: 2.1

jobs:
  persist:
    docker:
      - image: circleci/node:9.6.1
    steps:
      - run: mkdir tmp && echo "hi" > tmp/test.txt
      - persist_to_workspace:
          root: .
          paths:
            - tmp
  attach:
    machine: true
    steps:
      - attach_workspace:
          at: tmp
      - run: ls tmp
      - run: cat tmp/test.txt

workflows:
  test:
    jobs:
      - persist
      - attach:
          requires:
            - persist
#version: 2.1
#
#jobs:
#    build:
#        docker:
#          - image: circleci/node:9.6.1
#        steps:
#          - run: bash --version
#          - run: mkdir 1 && mkdir 1/2 && mkdir 1/2/3
#          - run: shopt -s globstar
#          - run: |
#              for f in 1/**; do
#                echo "$f"
#              done
